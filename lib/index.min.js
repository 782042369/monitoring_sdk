!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).MonitorJS={})}(this,(function(t){"use strict";function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t,e){return t(e={exports:{}},e.exports),e.exports}var o=e(r((function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}))),n=e(r((function(t){function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}t.exports=function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}))),i=e(r((function(t){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.__esModule=!0,t.exports.default=t.exports}))),c=r((function(t){function e(r,o){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r,o)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}));e(c);var s=e(r((function(t){t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&c(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports}))),a=r((function(t){function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}));e(a);var u,f,l,p=r((function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports})),d=e(p),h=e(r((function(t){var e=a.default;t.exports=function(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(t)},t.exports.__esModule=!0,t.exports.default=t.exports}))),v=r((function(t){function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})),y=e(v);!function(t){t.JS="js",t.RESOURCE="resource",t.VUE="vue",t.PROMISE="promise",t.AJAX="ajax",t.CROSS_SCRIPT="cross_srcipt",t.UNKNOW="unknow",t.PERFORMANCE="performance"}(u||(u={})),function(t){t.XHR="xhr",t.FETCH="fetch"}(f||(f={})),function(t){t.GET="get",t.POST="post",t.DELETE="delete",t.PUT="put"}(l||(l={}));var m=r((function(t){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports}));e(m);var g=r((function(t){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports}));e(g);var x=r((function(t){function e(r,o,n){return g()?(t.exports=e=Reflect.construct,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=e=function(t,e,r){var o=[null];o.push.apply(o,e);var n=new(Function.bind.apply(t,o));return r&&c(n,r.prototype),n},t.exports.__esModule=!0,t.exports.default=t.exports),e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}));e(x);var w=r((function(t){function e(r){var o="function"==typeof Map?new Map:void 0;return t.exports=e=function(t){if(null===t||!m(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==o){if(o.has(t))return o.get(t);o.set(t,e)}function e(){return x(t,arguments,v(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),c(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}));function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=y(t);if(e){var n=y(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return h(this,r)}}function b(t){if(!t)return!1;return/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/.test(t)}function O(t){return Object.prototype.toString.call(t).replace(/\[object\s|\]/g,"")}function j(t){return"Function"===O(t)}var S=function(t){s(r,t);var e=E(r);function r(){return o(this,r),e.call(this)}return n(r,[{key:"format",value:function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,"".concat(String(this.getFullYear())).substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+{0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"}["".concat(String(this.getDay()))])),e)new RegExp("(".concat(r,")")).test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[r]:"00".concat(e[r]).substr("".concat(String(e[r])).length)));return t}}]),r}(e(w)(Date));function R(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz123456789",r=e.length,o="",n=0;n<t;n++)o+=e.charAt(Math.floor(Math.random()*r));return o+(new Date).getTime()}function _(t){if(t)return String(t);var e=localStorage.getItem("ps_markUser")||"";return e||(e=R(),localStorage.setItem("ps_markUser",e)),e}function P(){var t=new S,e=localStorage.getItem("ps_markUv")||"",r=localStorage.getItem("ps_markUvTime")||"",o=t.format("yyyy/MM/dd 23:59:59");return(!e&&!r||t.getTime()>1*r)&&(e=R(),localStorage.setItem("ps_markUv",e),localStorage.setItem("ps_markUvTime",JSON.stringify(new Date(o).getTime()))),e}function T(){var t=document.createElement("canvas"),e=t.getContext("2d"),r=window.location.host;e.textBaseline="top",e.font="14px 'Arial'",e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText(r,2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText(r,4,17);var o=t.toDataURL().replace("data:image/png;base64,","");return function(t){var e,r,o,n="";for(e=0,r=(t+="").length;e<r;e++)n+=(o=t.charCodeAt(e).toString(16)).length<2?"0".concat(o):o;return n}(atob(o).slice(-16,-12))}function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var I,M=function(){function t(e){o(this,t),i(this,"reportUrl",void 0),this.reportUrl=e}return n(t,[{key:"report",value:function(t){if(!b(this.reportUrl))throw"上报信息url地址格式不正确,reportUrl=".concat(this.reportUrl);var e,r,o;this.reportByImg(k(k({},t),{},{first:sessionStorage.getItem("ps_first")?0:(sessionStorage.setItem("ps_first","1"),1),device:JSON.stringify({lan:(o=window.navigator.language.split("-"),o[1]&&(o[1]=o[1].toUpperCase()),o.join("_")),net:null===(e=navigator)||void 0===e||null===(r=e.connection)||void 0===r?void 0:r.effectiveType,orientation:window.matchMedia("(orientation: portrait)").matches?"竖屏":"横屏",fingerprint:T(),h:window.screen.height,w:window.screen.width})}))}},{key:"reportByImg",value:function(t){if(!b(this.reportUrl))throw"上报信息url地址格式不正确,reportUrl=".concat(this.reportUrl);try{(new Image).src="".concat(this.reportUrl,"/up.gif?v=").concat((new Date).getTime(),"&").concat(this.formatParams(t))}catch(t){}}},{key:"formatParams",value:function(t){var e=[];for(var r in t)e.push("".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(t[r])));return e.join("&")}}]),t}(),U={isStop:!0,queues:[],add:function(t,e){this.queues.push({reportUrl:t,data:e})},fire:function(){if(this.queues&&0!==this.queues.length){this.isStop=!1;var t=this.queues[0];new M(t.reportUrl).report(t.data),this.queues.splice(0,1),this.fire()}else this.isStop=!0}};function L(t){return t.reverse().filter((function(t){return t!==document&&t!==window})).map((function(t){return t.id?"".concat(t.nodeName.toLowerCase(),"#").concat(t.id):t.className&&"string"==typeof t.className?"".concat(t.nodeName.toLowerCase(),".").concat(t.className):t.nodeName.toLowerCase()})).join(" ")}function F(t){if("Array"===O(t))return L(t);for(var e=[];t;)e.push(t),t=t.parentNode;return L(e)}function C(){return I}function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function $(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}["click","touchstart","mousedown","keydown","mouseover"].forEach((function(t){document.addEventListener(t,(function(t){I=t}),{capture:!0,passive:!0})}));var B=function(){function t(e){o(this,t),i(this,"category",void 0),i(this,"msg",void 0),i(this,"url",void 0),i(this,"line",void 0),i(this,"col",void 0),i(this,"errorObj",void 0),i(this,"reportUrl",void 0),i(this,"extendsInfo",void 0),i(this,"appID",void 0),i(this,"userID",void 0),this.category=u.UNKNOW,this.msg="",this.url="",this.line="",this.col="",this.errorObj={},this.reportUrl=e.reportUrl,this.extendsInfo=e.extendsInfo,this.appID=e.appID,void 0!==e.userID&&(this.userID=e.userID)}return n(t,[{key:"recordError",value:function(){this.handleRecordError(),setTimeout((function(){U.isStop&&U.fire()}),100)}},{key:"handleRecordError",value:function(){try{if(!this.msg)return;if(this.reportUrl&&this.url&&this.url.toLowerCase().indexOf(this.reportUrl.toLowerCase())>=0)return;var t=this.handleErrorInfo();U.add(this.reportUrl,t)}catch(t){}}},{key:"handleErrorInfo",value:function(){var t,e={loginformation:this.msg};if(null!=this&&null!==(t=this.errorObj)&&void 0!==t&&t.stack&&(e.errorstack=this.errorObj.stack),this.category===u.JS)e.errorline=this.line,e.errorcol=this.col;else e.logother=this.errorObj;var r=C(),o=r?F(r.path):"",n=$($({},this.getExtendsInfo()),{},{category:this.category,appID:this.appID,url:(null==this?void 0:this.url)||location.href,log:JSON.stringify(e),markUser:_(this.userID),markUv:P(),preUrl:document.referrer&&document.referrer!==location.href?document.referrer:""});return o&&(n.selector=o),n}},{key:"getExtendsInfo",value:function(){try{var t,e={},r=this.extendsInfo||{};for(var o in j(r.getDynamic)&&(t=r.getDynamic()),"Object"===O(t)&&(r=$($({},r),t)),r)j(r[o])||(e[o]=r[o]);return e}catch(t){return{}}}}]),t}();function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=y(t);if(e){var n=y(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return h(this,r)}}var A=function(){function t(e){o(this,t),i(this,"params",void 0),this.params=e}return n(t,[{key:"handleError",value:function(){new q(this.params)}}]),t}(),q=function(t){s(r,t);var e=H(r);function r(t){var n;return o(this,r),n=e.call(this,t),window.XMLHttpRequest&&n.handleXhrError(),window.fetch&&n.handleFetchError(),n}return n(r,[{key:"_handleEvent",value:function(t,e,r,o,n){try{var i=Date.now()-e;this.category=u.AJAX,this.msg=u.AJAX,this.errorObj={status:r.status,duration:i,type:t,method:n.method.toLowerCase(),lib:o,path:n.url},this.recordError()}catch(t){}}},{key:"handleXhrError",value:function(){var t=this,e=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(t,r){return r.match(/up.gif/)||r.match(/sockjs/)||(this.logData={method:t||l.GET,url:r}),e.apply(this,arguments)};var r=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){var e=this;if(this.addEventListener&&this.logData){var o=Date.now();["error","load","abort"].map((function(r){e.addEventListener(r,(function(){t._handleEvent(r,o,e,f.XHR,e.logData)}))}))}return r.apply(this,arguments)}}},{key:"handleFetchError",value:function(){var t=this,e=window.fetch;window.fetch=function(){for(var r,o={method:l.GET,url:""},n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];o.method=(null==i||null===(r=i[1])||void 0===r?void 0:r.method)||l.GET,o.url=i[0];var s=Date.now();e.apply(this,i).then((function(e){var r=e.clone();t._handleEvent(e.ok?"load":"error",s,{status:r.status||e.ok?200:500,response:e},f.FETCH,o)})).catch((function(e){throw t._handleEvent("error",s,{status:500,response:e},f.FETCH,o),e}))}}}]),r}(B);function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=y(t);if(e){var n=y(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return h(this,r)}}var X=function(t){s(r,t);var e=J(r);function r(t){return o(this,r),e.call(this,t)}return n(r,[{key:"handleError",value:function(){var t=this;window.onerror=function(e,r,o,n,i){try{t.category=u.JS,t.msg=e,t.url=r,t.line=o,t.col=n,t.errorObj=i,t.recordError()}catch(i){}}}}]),r}(B);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=y(t);if(e){var n=y(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return h(this,r)}}var G=function(t){s(r,t);var e=z(r);function r(t){return o(this,r),e.call(this,t)}return n(r,[{key:"handleError",value:function(){var t=this;window.addEventListener("unhandledrejection",(function(e){try{var r,o;if(!e||!e.reason)return;null!=e&&null!==(r=e.reason)&&void 0!==r&&null!==(o=r.config)&&void 0!==o&&o.url&&(t.url=e.reason.config.url),t.category=u.PROMISE,t.msg=e.reason,t.errorObj=e.reason,t.recordError()}catch(t){}}),!0)}}]),r}(B);function V(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function Z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?V(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=y(t);if(e){var n=y(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return h(this,r)}}var W=function(t){s(r,t);var e=K(r);function r(t){return o(this,r),e.call(this,t)}return n(r,[{key:"handleError",value:function(){var t=this;window.addEventListener("error",(function(e){try{if(!e)return;t.category=u.RESOURCE;var r=e.target||e.srcElement;if(!(r instanceof HTMLScriptElement||r instanceof HTMLLinkElement||r instanceof HTMLImageElement))return;t.msg="加载 ".concat(r.tagName," 资源错误"),t.url=location.href,t.errorObj=Z(Z({},r),{},{src:r.src||r.href}),t.recordError()}catch(t){}}),!0)}}]),r}(B);function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=y(t);if(e){var n=y(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return h(this,r)}}function Q(t,e,r,o){var n=null==o?void 0:o.version,i={message:"".concat(t.message,"(").concat(r,")"),url:"undefined"==typeof document||null===document.location?"":document.location.href,name:t.name,stack:t.stack||[]};if("String"===O(n))switch(function(t){return Number(t.split(".")[0])}(n)){case 2:i=Object.assign(i,function(t){var e="";if(t.$root===t)e="root";else{var r=t._isVue?t.$options&&t.$options.name||t.$options&&t.$options._componentTag:t.name;e=(r?"component <".concat(r,">"):"anonymous component")+(t._isVue&&t.$options&&t.$options.__file?" at ".concat(t.$options&&t.$options.__file):"")}return{componentName:e,propsData:t.$options&&t.$options.propsData}}(e));break;case 3:i=Object.assign(i,function(t){var e="";if(t.$root===t)e="root";else{var r=t.$options&&t.$options.name;e=r?"component <".concat(r,">"):"anonymous component"}return{componentName:e,propsData:t.$props}}(e));break;default:return}return i}var tt=function(t){s(r,t);var e=Y(r);function r(t){return o(this,r),e.call(this,t)}return n(r,[{key:"handleError",value:function(t){var e=this;t&&(t.config.errorHandler=function(r,o,n){try{e.msg=JSON.stringify(Q(r,o,n,t)),e.category=u.VUE,e.recordError()}catch(r){}})}}]),r}(B),et=function(){try{if(!window.performance||!window.performance.timing)return;var t=window.performance.timing,e={};return e.redirectTime=(t.redirectEnd-t.redirectStart).toFixed(2),e.dnsTime=(t.domainLookupEnd-t.domainLookupStart).toFixed(2),e.ttfbTime=(t.responseStart-t.navigationStart).toFixed(2),e.appcacheTime=(t.domainLookupStart-t.fetchStart).toFixed(2),e.unloadTime=(t.unloadEventEnd-t.unloadEventStart).toFixed(2),e.tcpTime=(t.connectEnd-t.connectStart).toFixed(2),e.reqTime=(t.responseEnd-t.responseStart).toFixed(2),e.analysisTime=(t.domComplete-t.domInteractive).toFixed(2),e.blankTime=(t.domLoading-t.navigationStart).toFixed(2),e.domReadyTime=(t.domContentLoadedEventEnd-t.navigationStart).toFixed(2),e.loadPageTime=(t.loadEventEnd-t.navigationStart).toFixed(2),e.radt=(t.fetchStart-t.navigationStart).toFixed(2)||0,e}catch(t){}},rt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;if(window.performance&&window.performance.getEntries){var r=[],o=window.performance.getEntries();return o&&0!==o.length?(o.forEach((function(o){var n=o.name?o.name.split("?")[0]:"",i={};n.indexOf(e)>-1||t.indexOf(o.initiatorType)>-1&&(i.name=n,i.initiatorType=o.initiatorType,i.nextHopProtocol=o.nextHopProtocol,i.redirectTime=(o.redirectEnd-o.redirectStart).toFixed(2),i.dnsTime=(o.domainLookupEnd-o.domainLookupStart).toFixed(2),i.tcpTime=(o.connectEnd-o.connectStart).toFixed(2),i.ttfbTime=(o.responseStart-o.requestStart).toFixed(2),i.responseTime=(o.responseEnd-o.responseStart).toFixed(2),i.reqTotalTime=(o.responseEnd-o.requestStart).toFixed(2),i.decodedBodySize=o.decodedBodySize||0,r.push(i))})),r):r}};function ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function nt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function it(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=y(t);if(e){var n=y(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return h(this,r)}}var ct=function(t){s(r,t);var e=it(r);function r(t){var n;return o(this,r),n=e.call(this,{reportUrl:t.reportUrl,appID:t.appID,userID:t.userID,extendsInfo:t.extendsInfo}),i(d(n),"isPage",void 0),i(d(n),"isResource",void 0),i(d(n),"usefulType",void 0),i(d(n),"outTime",void 0),i(d(n),"config",void 0),t.isPage=!1!==t.isPage,t.isResource=!1!==t.isResource,n.isPage=t.isPage,n.isResource=t.isResource,n.usefulType=n.getSourceType(t),n.outTime=50,n.config={resourceList:[],performance:{}},n.category=u.PERFORMANCE,n.reportUrl=t.reportUrl||"",n}return n(r,[{key:"getSourceType",value:function(t){var e=[];return!1!==t.isRScript&&e.push("script"),!1!==t.isRCSS&&e.push("css"),!1!==t.isRLink&&e.push("link"),!1!==t.isRIMG&&e.push("img"),e}},{key:"record",value:function(){try{this.isPage&&(this.config.performance=et()),this.isResource&&(this.config.resourceList=rt(this.usefulType,this.reportUrl));var t={performance:this.config.performance,resourceList:this.config.resourceList},e=nt(nt({},this.getExtendsInfo()),{},{category:this.category,log:JSON.stringify(t),appID:this.appID,markUser:_(this.userID),markUv:P(),url:(null==this?void 0:this.url)||location.href});localStorage.setItem("page_performance",JSON.stringify(e)),new M(this.reportUrl).report(e),this.clearPerformance()}catch(t){}}},{key:"clearPerformance",value:function(){var t,e;null!==(t=window)&&void 0!==t&&null!==(e=t.performance)&&void 0!==e&&e.clearResourceTimings&&(performance.clearResourceTimings(),this.config.performance={},this.config.resourceList="")}}]),r}(B),st=function(){function t(){o(this,t),i(this,"jsError",void 0),i(this,"promiseError",void 0),i(this,"resourceError",void 0),i(this,"ajaxError",void 0),i(this,"vueError",void 0),this.jsError=!0,this.promiseError=!0,this.resourceError=!0,this.ajaxError=!0,this.vueError=!1}return n(t,[{key:"init",value:function(t){if(null==t||!t.reportUrl||!b(t.reportUrl))throw"reportUrl is error,".concat(t.reportUrl);if(null==t||!t.appID)throw"appID is error,".concat(t.appID);this.jsError=!(!1===(null==t?void 0:t.jsError)),this.promiseError=!(!1===(null==t?void 0:t.promiseError)),this.resourceError=!(!1===(null==t?void 0:t.resourceError)),this.ajaxError=!(!1===(null==t?void 0:t.ajaxError)),this.vueError=!0===(null==t?void 0:t.vueError);var e=t.reportUrl,r=t.appID,o={reportUrl:e,extendsInfo:t.extendsInfo||{},appID:r,userID:t.userID};this.jsError&&new X(o).handleError(),this.promiseError&&new G(o).handleError(),this.resourceError&&new W(o).handleError(),this.ajaxError&&new A(o).handleError(),this.vueError&&t.vue&&new tt(o).handleError(t.vue),this.monitorPerformance(t)}},{key:"monitorPerformance",value:function(t){window.onload=function(){setTimeout((function(){new ct(t).record()}),300)}}}]),t}();window.MonitorJS=st,t.MonitorJS=st,Object.defineProperty(t,"__esModule",{value:!0})}));
